<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-users] unsafe MDA procmail recommended by fetchmail
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-users/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20unsafe%20MDA%20procmail%20recommended%20by%20fetchmail&In-Reply-To=%3C200511021421.jA2EL1Dm010918%40ns-srv-2.bln1.siemens.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-users] unsafe MDA procmail recommended by fetchmail</H1>
    <B>Thomas Wolff</B> 
    <A HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20unsafe%20MDA%20procmail%20recommended%20by%20fetchmail&In-Reply-To=%3C200511021421.jA2EL1Dm010918%40ns-srv-2.bln1.siemens.de%3E"
       TITLE="[fetchmail-users] unsafe MDA procmail recommended by fetchmail">towo at towo.net
       </A><BR>
    <I>Wed Nov  2 15:21:01 CET 2005</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000106.html">[fetchmail-users] Re: unsafe MDA procmail recommended by fetchmail
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#105">[ date ]</a>
              <a href="thread.html#105">[ thread ]</a>
              <a href="subject.html#105">[ subject ]</a>
              <a href="author.html#105">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>There has been some discussion about the MDA configuration of fetchmail 
in the last few days, and I had proposed my configuration:
&gt;<i>   mda &quot;formail &gt;&gt; ${MAIL-$HOME/Post/Inbox}&quot;
</I>or alternatively:
&gt;<i>   mda &quot;formail -s procmail -p&quot;
</I>
Jakob Hirsch as well as the fetchmail manual page even suggested to 
use just procmail alone.

Now I've happened to encounter a really serious problem with procmail.
It turned out to be what the fetchmail man page calls an &quot;unsafe MDA&quot;:
&gt;<i> RETRIEVAL FAILURE MODES
</I>&gt;<i>        The protocols fetchmail uses to talk  to  mailservers  are
</I>&gt;<i>        next  to  bulletproof.   In normal operation forwarding to
</I>&gt;<i>        port 25, no message is ever deleted (or  even  marked  for
</I>&gt;<i>        deletion)  on  the  host  until  the  SMTP listener on the
</I>&gt;<i>        client side has acknowledged to fetchmail that the message
</I>&gt;<i>        has been either accepted for delivery or rejected due to a
</I>&gt;<i>        spam block.
</I>&gt;<i> 
</I>&gt;<i>        When forwarding to an MDA, however, there is  more  possi-
</I>&gt;<i>        bility of error.  Some MDAs are 'safe' and reliably return
</I>&gt;<i>        a nonzero status on any delivery error, even  one  due  to
</I>&gt;<i>        temporary  resource  limits.   The  well-known procmail(1)
</I>&gt;<i>        program is like this; so are  most  programs  designed  as
</I>&gt;<i>        mail  transport  agents, such as sendmail(1), and exim(1).
</I>&gt;<i>        These programs give back a reliable positive  acknowledge-
</I>&gt;<i>        ment  and  can be used with the mda option with no risk of
</I>&gt;<i>        mail loss.  Unsafe MDAs, though,  may  return  0  even  on
</I>&gt;<i>        delivery failure.  If this happens, you will lose mail.
</I>
I had a &quot;disk quota exceeded&quot; condition here which procmail failed 
to handle properly. It accepted its input, threw it away and just 
returned success.

I heard before that exceeded quota is a known touchstone for proper 
error handling of software. Obviously procmail has a serious issue 
here which should be fixed as soon as possible. As long as it is not, 
fetchmail should no longer recommend using procmail but rather warn 
from it.

Kind regards,
Thomas Wolff

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000106.html">[fetchmail-users] Re: unsafe MDA procmail recommended by fetchmail
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#105">[ date ]</a>
              <a href="thread.html#105">[ thread ]</a>
              <a href="subject.html#105">[ subject ]</a>
              <a href="author.html#105">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-users">More information about the fetchmail-users
mailing list</a><br>
</body></html>
