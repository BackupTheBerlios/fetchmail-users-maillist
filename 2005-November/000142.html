<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-users] feedback on failed delivery
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-users/2005-November/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20feedback%20on%20failed%20delivery&In-Reply-To=%3Cm3br0dv4e6.fsf%40merlin.emma.line.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000141.html">
   <LINK REL="Next"  HREF="000143.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-users] feedback on failed delivery</H1>
    <B>Matthias Andree</B> 
    <A HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20feedback%20on%20failed%20delivery&In-Reply-To=%3Cm3br0dv4e6.fsf%40merlin.emma.line.org%3E"
       TITLE="[fetchmail-users] feedback on failed delivery">matthias.andree at gmx.de
       </A><BR>
    <I>Tue Nov 22 02:48:49 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000141.html">[fetchmail-users] feedback on failed delivery
</A></li>
        <LI>Next message: <A HREF="000143.html">[fetchmail-users] fetchmail 6.2.9-rc10 available (this is it, with minor bug fixes)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#142">[ date ]</a>
              <a href="thread.html#142">[ thread ]</a>
              <a href="subject.html#142">[ subject ]</a>
              <a href="author.html#142">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thomas Wolff &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">towo at towo.net</A>&gt; writes:

&gt;<i> Also, in either case, the indication of the MDA as the cause is quite 
</I>&gt;<i> hidden in the far end of a line. It should really be ensured to be 
</I>&gt;<i> a separate line.
</I>&gt;<i> In this respect I don't understand your comment:
</I>&gt;<i>
</I>&gt;<i> From: Matthias Andree &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">matthias.andree at gmx.de</A>&gt;
</I>&gt;&gt;<i> &gt; Now it's:
</I>&gt;&gt;<i> &gt; &gt; 1 message for deblnss01a/demsn702 at blnss35a.
</I>&gt;&gt;<i> &gt; &gt; reading message deblnss01a/<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">demsn702 at blnss35a</A>:1 of 1 (3257 header octets) ... (2542 body octets) ..fetchmail: MDA returned nonzero status 255
</I>&gt;&gt;<i> &gt; &gt;  not flushed
</I>&gt;&gt;<i> &gt; which is fine. Just make it better visible by putting the error notice 
</I>&gt;&gt;<i> &gt; on a new line.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Well - fetchmail is actually behaving as was originally intended. It
</I>&gt;&gt;<i> prints the error message at the earliest possible time, and the &quot;not
</I>&gt;&gt;<i> flushed&quot; is a consequence of the error.
</I>&gt;<i> The message would not be printed significantly less early if you just 
</I>&gt;<i> flush stdout first as there is no noticeable delay and no error situation 
</I>&gt;<i> to be expected by that.
</I>
That is exactly what happens: fetchmail builds up the line, prints the
sizes of header and body, flushes the line so that --showdots can work,
and then encounters a problem shipping the fetched message out to the
MDA. This error message triggers the flush of a line without LF, then
the error message. There is no easy way to figure if LF needs to be
printed before the problem message, and this is not the time for
sweeping changes. I looked into the problem, and more than 100 code
lines need to change. That is a full days work for a cosmetic change,
I'm not ready to do that now.

Please file your --mda /bin/false example with a stripped-down set of
output examples (one for each of the two error messages is probably
sufficient, SIGPIPE vs. MDA exit) to the bug tracker at BerliOS.de so we
don't forget about the bug.

-- 
Matthias Andree

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000141.html">[fetchmail-users] feedback on failed delivery
</A></li>
	<LI>Next message: <A HREF="000143.html">[fetchmail-users] fetchmail 6.2.9-rc10 available (this is it, with minor bug fixes)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#142">[ date ]</a>
              <a href="thread.html#142">[ thread ]</a>
              <a href="subject.html#142">[ subject ]</a>
              <a href="author.html#142">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-users">More information about the fetchmail-users
mailing list</a><br>
</body></html>
