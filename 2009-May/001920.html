<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-users] 4 multidrop but one destination server
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-users/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%204%20multidrop%20but%20one%20destination%20server&In-Reply-To=%3Cop.utevqhof1e62zd%40balu.cs.uni-paderborn.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001919.html">
   <LINK REL="Next"  HREF="001921.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-users] 4 multidrop but one destination server</H1>
    <B>Matthias Andree</B> 
    <A HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%204%20multidrop%20but%20one%20destination%20server&In-Reply-To=%3Cop.utevqhof1e62zd%40balu.cs.uni-paderborn.de%3E"
       TITLE="[fetchmail-users] 4 multidrop but one destination server">matthias.andree at gmx.de
       </A><BR>
    <I>Mon May  4 17:24:07 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001919.html">[fetchmail-users] 4 multidrop but one destination server
</A></li>
        <LI>Next message: <A HREF="001921.html">[fetchmail-users] 4 multidrop but one destination server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1920">[ date ]</a>
              <a href="thread.html#1920">[ thread ]</a>
              <a href="subject.html#1920">[ subject ]</a>
              <a href="author.html#1920">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am 04.05.2009, 16:48 Uhr, schrieb Michelle Konzack  
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">linux4michelle at tamay-dogan.net</A>&gt;:

&gt;<i> Salut Andr&#233;e,
</I>

Salut Konzack,

&gt;<i> Am 2009-05-04 15:13:30, schrieb Matthias Andree:
</I>&gt;&gt;<i> Can you show example messages, once how they are on the upstream's POP3
</I>&gt;&gt;<i> server (for instance, log in with mutt and show all headers), and then
</I>&gt;&gt;<i> what your fetchmail -vvv and your SMTP server log?
</I>&gt;<i>
</I>&gt;<i> The MX simply pushed all messages in one box.
</I>
That's probably how it was configured, right? :-)

&gt;<i> ---[ '~/.courier' ]-----------------------------------------------------
</I>&gt;<i> |/usr/bin/preline /usr/bin/maildrop
</I>&gt;<i> ------------------------------------------------------------------------
</I>
Hm. I know too little of its internals.

&gt;&gt;<i> 2. qvirtual mapping in fetchmail is applied very early, before
</I>&gt;&gt;<i> localdomains checks, and before user mappings. So you can go like:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> qvirtual &quot;alice-&quot;
</I>&gt;&gt;<i> user login pass foo is one-info=bla1 two-info=bla2 ...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You cannot use a &quot;*&quot; here.
</I>&gt;<i>
</I>&gt;<i> Right.  This is why we tried to use
</I>&gt;<i>
</I>...

&gt;<i> ----[ '/home/catchall.secret/.procmailrc' ]-------------------------
</I>&gt;<i> MAILDIR=${HOME}/Maildir
</I>&gt;<i> DEFAULT=${MAILDIR}/
</I>&gt;<i>
</I>&gt;<i> TEMP=`formail -czx Delivered-To: | \
</I>&gt;<i>       grep 'unknown' | \
</I>&gt;<i>       head -n1 | \
</I>&gt;<i>       sed 's|@.*||'`
</I>&gt;<i>
</I>&gt;<i> DOMAIN=`echo ${TEMP} | \
</I>&gt;<i>         sed 's|-unknown-catchall.*||'`
</I>&gt;<i>
</I>&gt;<i> LOCALPART=`echo ${TEMP} | \
</I>&gt;<i>            sed 's|.*unknown-catchall-||'`
</I>&gt;<i>
</I>&gt;<i> :0
</I>&gt;<i> * $ ^Delivered-To:.*${DOMAIN}-unknown-catchall-${LOCALPART}@
</I>&gt;<i> {
</I>&gt;<i>   :0fw
</I>&gt;<i>   |formail -i &quot;Delivered-To: ${LOCALPART}@${DOMAIN}&quot;
</I>&gt;<i>   :0c
</I>&gt;<i>   .BACKUPS_`echo ${DOMAIN} |tr '.' '_'`/
</I>&gt;<i>   :0
</I>&gt;<i>   |sendmail -t
</I>&gt;<i> }
</I>&gt;<i> ------------------------------------------------------------------------
</I>
I'd like to avoid procmail altogether, and using an MDA, too, so we'll  
have to change the fetchmail code for one of the next releases. I've  
committed corresponding updates to the TODO.txt file in SVN.

-- 
Matthias Andree

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001919.html">[fetchmail-users] 4 multidrop but one destination server
</A></li>
	<LI>Next message: <A HREF="001921.html">[fetchmail-users] 4 multidrop but one destination server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1920">[ date ]</a>
              <a href="thread.html#1920">[ thread ]</a>
              <a href="subject.html#1920">[ subject ]</a>
              <a href="author.html#1920">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-users">More information about the fetchmail-users
mailing list</a><br>
</body></html>
