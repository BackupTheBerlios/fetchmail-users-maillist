<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-users] fetchmail runs MDA as root
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-users/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20fetchmail%20runs%20MDA%20as%20root&In-Reply-To=%3CA7EC1713-CA35-424E-AAAD-B6EBCAFDB896%40ritual.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002279.html">
   <LINK REL="Next"  HREF="002283.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-users] fetchmail runs MDA as root</H1>
    <B>Uli Zappe</B> 
    <A HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20fetchmail%20runs%20MDA%20as%20root&In-Reply-To=%3CA7EC1713-CA35-424E-AAAD-B6EBCAFDB896%40ritual.org%3E"
       TITLE="[fetchmail-users] fetchmail runs MDA as root">uli at ritual.org
       </A><BR>
    <I>Wed Feb 10 06:39:50 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002279.html">[fetchmail-users] keep option
</A></li>
        <LI>Next message: <A HREF="002283.html">[fetchmail-users] fetchmail runs MDA as root
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2282">[ date ]</a>
              <a href="thread.html#2282">[ thread ]</a>
              <a href="subject.html#2282">[ subject ]</a>
              <a href="author.html#2282">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I just configured fetchmail (which I use in daemon mode running as root) to use procmail as an MDA for some accounts.

According to fetchmail's man page:

&quot;If fetchmail is running as root, it sets its user id to that of the target user while delivering mail through an MDA.&quot;

If I understand this correctly, the MDA should run as the recipient user.

However, this does not work for me. procmail is configured to run some scripts when mails arrive, and procmail itself and these scripts are all running as root instead of as the mail recipient.

Here is a test line I tried in fetchmailrc:

server xyz.com    protocol pop3   auth password    user abc    password xyz   to uli   fetchall mda &quot;whoami &gt; /tmp/who.txt&quot;

As I understand it, who.txt should contain &quot;uli&quot; and belong to &quot;uli&quot; in this configuration, but actually it's root in both cases.

Is this a bug, or did I overlook something?

This is fetchmail release 6.3.11+GSS+SSL+KRB5 on Mac OS X 10.6.3 10.3.0 Darwin Kernel Version 10.3.0: Tue Jan 19 17:20:02 PST 2010; root:xnu-1504.3.6~2/RELEASE_I386 i386

TIA for any info!

            Bye
                    Uli
________________________________________________________

  Uli Zappe, Solmsstra&#223;e 5, D-65189 Wiesbaden, Germany
  <A HREF="http://www.ritual.org">http://www.ritual.org</A>
  Fon: +49-700-ULIZAPPE
  Fax: +49-700-ZAPPEFAX
________________________________________________________


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002279.html">[fetchmail-users] keep option
</A></li>
	<LI>Next message: <A HREF="002283.html">[fetchmail-users] fetchmail runs MDA as root
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2282">[ date ]</a>
              <a href="thread.html#2282">[ thread ]</a>
              <a href="subject.html#2282">[ subject ]</a>
              <a href="author.html#2282">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-users">More information about the fetchmail-users
mailing list</a><br>
</body></html>
