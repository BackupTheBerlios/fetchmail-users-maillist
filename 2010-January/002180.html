<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-users] Network time-outs when handling IMAP IDLE
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-users/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20Network%20time-outs%20when%20handling%20IMAP%20IDLE&In-Reply-To=%3C4B46CC56.4090305%40papercut.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002179.html">
   <LINK REL="Next"  HREF="002181.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-users] Network time-outs when handling IMAP IDLE</H1>
    <B>Matt Doran</B> 
    <A HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20Network%20time-outs%20when%20handling%20IMAP%20IDLE&In-Reply-To=%3C4B46CC56.4090305%40papercut.com%3E"
       TITLE="[fetchmail-users] Network time-outs when handling IMAP IDLE">matt.doran at papercut.com
       </A><BR>
    <I>Fri Jan  8 07:10:30 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002179.html">[fetchmail-users] antispam 501 doesn&#180;t delete mail from pop3
</A></li>
        <LI>Next message: <A HREF="002181.html">[fetchmail-users] Network time-outs when handling IMAP IDLE
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2180">[ date ]</a>
              <a href="thread.html#2180">[ thread ]</a>
              <a href="subject.html#2180">[ subject ]</a>
              <a href="author.html#2180">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

We're long-time user's of fetchmail and have previously used the POP3 
support.  I've recently started experimenting with IMAP IDLE.  It's 
working great!   It allows us to have near instantaneous mail delivery 
without continual polling.

I have some questions about the time-out behaviour when using IDLE.   If 
I start up fetchmail it will stay connected indefinitely performing an 
IDLE. However if I deliberately drop the network connection to simulate 
a network out-tage (e.g. reboot the modem), it seems that fetchmail 
takes a very long time to recognize this (more than 30 minutes), even 
though I'm using the default time-out of 300 seconds.  

I'm using cron to start fetchmail regularly, so if it stops/errors then 
it will restart automatically.    So I'd prefer to detect the time-out 
early, and restart rather than waiting in a hung state.  Is there a way 
to specify a time-out so that the we'll detect outages faster?

Looking at the code (which I don't fully understand) it seems to have a 
28 minute time-out to reissue the IDLE periodically.   Could this be the 
reason we see the 30+ minute time to time-out?    Would it make sense to 
have an option to shorten this period which would allow us to detect 
outtages faster?  Any other ideas?    I'm happy to try develop a patch 
if you have a suggestion.

Regards,
Matt


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002179.html">[fetchmail-users] antispam 501 doesn&#180;t delete mail from pop3
</A></li>
	<LI>Next message: <A HREF="002181.html">[fetchmail-users] Network time-outs when handling IMAP IDLE
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2180">[ date ]</a>
              <a href="thread.html#2180">[ thread ]</a>
              <a href="subject.html#2180">[ subject ]</a>
              <a href="author.html#2180">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-users">More information about the fetchmail-users
mailing list</a><br>
</body></html>
