<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-users] Re: fix lost POP3 deletes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-users/2006-May/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20Re%3A%20fix%20lost%20POP3%20deletes&In-Reply-To=%3C20060518111223.GA3426%40session.bombay.retortsoft.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000412.html">
   <LINK REL="Next"  HREF="000414.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-users] Re: fix lost POP3 deletes</H1>
    <B>Sunil Shetye</B> 
    <A HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20Re%3A%20fix%20lost%20POP3%20deletes&In-Reply-To=%3C20060518111223.GA3426%40session.bombay.retortsoft.com%3E"
       TITLE="[fetchmail-users] Re: fix lost POP3 deletes">shetye at bombay.retortsoft.com
       </A><BR>
    <I>Thu May 18 13:12:23 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000412.html">[fetchmail-users] Re: [PATCH] Re: fix lost POP3 deletes
</A></li>
        <LI>Next message: <A HREF="000414.html">[fetchmail-users] Re: fix lost POP3 deletes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#413">[ date ]</a>
              <a href="thread.html#413">[ thread ]</a>
              <a href="subject.html#413">[ subject ]</a>
              <a href="author.html#413">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Quoting from Frederic Marchal's mail on Thu, May 18, 2006:
&gt;<i> Using pop3, the size of the mail is one additional information that can 
</I>&gt;<i> be used to ensure it is not the same message with the same UID. The list 
</I>&gt;<i> command returns it and fetchmail does use it during the communication. I 
</I>&gt;<i> expect it would be much less likely that a UID is recycled on a message 
</I>&gt;<i> with the exact same size.
</I>&gt;<i> 
</I>&gt;<i> If a message is using the same UID as a message we know should have been 
</I>&gt;<i> deleted, then list its size and compare it. If it is the same, it can be 
</I>&gt;<i> deleted again. If not, it is a new message and should be downloaded.
</I>&gt;<i> 
</I>&gt;<i> Does it make sense ?
</I>
There are a few objections to this:

- fetchmail currently does not store the size in the fetchids file, so
  doing this will require a modification of the fetchids file format.

- fetchmail does not get the size of all mails right now (in the
  default setup), only of the mails it is going to download. Your
  suggestion would imply that fetchmail will have to get UIDs as well
  as sizes of all mails for comparison. This would imply a lot of
  delay in getting mails, especially when 'keep' is on.

- Some mailservers keep the flags of a mail in the mail itself by
  adding a header like Status:. So, the size of a mail may actually
  change when it turns from 'new' to 'old'. Due to size mismatch,
  mails from such mailservers will get downloaded again.

- Some mailservers misreport sizes! I remember one such server being
  reported:

&lt;<A HREF="http://lists.ccil.org/pipermail/fetchmail-friends/2002-January/005572.html">http://lists.ccil.org/pipermail/fetchmail-friends/2002-January/005572.html</A>&gt;

-- 
Sunil Shetye.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000412.html">[fetchmail-users] Re: [PATCH] Re: fix lost POP3 deletes
</A></li>
	<LI>Next message: <A HREF="000414.html">[fetchmail-users] Re: fix lost POP3 deletes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#413">[ date ]</a>
              <a href="thread.html#413">[ thread ]</a>
              <a href="subject.html#413">[ subject ]</a>
              <a href="author.html#413">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-users">More information about the fetchmail-users
mailing list</a><br>
</body></html>
