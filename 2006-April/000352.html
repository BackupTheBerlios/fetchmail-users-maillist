<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-users] &quot;Seen&quot; status disappears everytime [Resending]
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-users/2006-April/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20%22Seen%22%20status%20disappears%20everytime%20%5BResending%5D&In-Reply-To=%3C20060421033215.46908.qmail%40web33405.mail.mud.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000345.html">
   <LINK REL="Next"  HREF="000353.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-users] &quot;Seen&quot; status disappears everytime [Resending]</H1>
    <B>Ratan Nalumasu</B> 
    <A HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20%22Seen%22%20status%20disappears%20everytime%20%5BResending%5D&In-Reply-To=%3C20060421033215.46908.qmail%40web33405.mail.mud.yahoo.com%3E"
       TITLE="[fetchmail-users] &quot;Seen&quot; status disappears everytime [Resending]">nalumasu at yahoo.com
       </A><BR>
    <I>Fri Apr 21 05:32:15 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000345.html">[fetchmail-users] Getting only messages older than X days
</A></li>
        <LI>Next message: <A HREF="000353.html">[fetchmail-users] &quot;Seen&quot; status disappears everytime [Resending]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#352">[ date ]</a>
              <a href="thread.html#352">[ thread ]</a>
              <a href="subject.html#352">[ subject ]</a>
              <a href="author.html#352">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I read the FAQ, man pages and tried several settings to solve a 
simple problem &quot;how to retain Seen flag when fetching mail with
fetchmail&quot; and met with complete failure.

The problem is that when I read the mail on the server using
elm, mailx, or squrrelmail, they all agree on what message is
previously read and what is not. However, when I fetch the mail
using fetchmail, those status bits are disappearing. I am
attaching my .fetchmailrc, the contents of the mailbox before
the fetchmail, output of &quot;fetchmail -v -v&quot;, and the mailbox
after the mail is fetched. Any help is welcome.

Thanks!
Ratan

============== .fetchmairc ===========
set postmaster &quot;ratan&quot;
set bouncemail
set no spambounce
set properties &quot;&quot;

defaults mda &quot;/usr/bin/procmail -d %T&quot;


poll bitter
    plugin &quot;env -u DISPLAY /home/ratan/bin/%h exec
/usr/local/bin/imapd&quot; auth ssh;
    user 'ratan' there is 'ratan' here
    expunge 10
    options fetchall
    mda &quot;cat &gt;&gt; /home/ratan/TEST&quot;

======= mailbox before fetchmail =====
$ cat /var/mail/ratan
&gt;<i>From <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>  Thu Apr 20 10:03:13 2006
</I>Return-Path: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;
Received: (from <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at localhost</A>)
        by bitter.cup.hp.com (8.11.1/8.11.1) id k3KH3D606424
        for ratan; Thu, 20 Apr 2006 10:03:13 -0700 (PDT)
Date: Thu, 20 Apr 2006 10:03:13 -0700 (PDT)
From: Ratan Nalumasu &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;
Message-Id: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">200604201703.k3KH3D606424 at bitter.cup.hp.com</A>&gt;
To: <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at bitter.cup.hp.com</A>
Subject: mark this message as seen
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Status: RO

asdfasdf

&gt;<i>From <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>  Thu Apr 20 10:03:22 2006
</I>Return-Path: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;
Received: (from <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at localhost</A>)
        by bitter.cup.hp.com (8.11.1/8.11.1) id k3KH3Mm06429
        for ratan; Thu, 20 Apr 2006 10:03:22 -0700 (PDT)
Date: Thu, 20 Apr 2006 10:03:22 -0700 (PDT)
From: Ratan Nalumasu &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;
Message-Id: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">200604201703.k3KH3Mm06429 at bitter.cup.hp.com</A>&gt;
To: <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at bitter.cup.hp.com</A>
Subject: NEW message
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Status: O

========== fetchmail -v -v =======
$ fetchmail -v -v
fetchmail: 6.2.5.2 querying bitter (protocol auto) at Thu 20 Apr
2006 10:06:13 AM PDT: poll started
fetchmail: 6.2.5.2 querying bitter (protocol IMAP) at Thu 20 Apr
2006 10:06:13 AM PDT: poll started
fetchmail: running env -u DISPLAY /home/ratan/bin/%h exec
/usr/local/bin/imapd (host bitter service 143)
fetchmail: IMAP&lt; * PREAUTH [CAPABILITY IMAP4REV1 LITERAL+ IDLE
NAMESPACE MAILBOX-REFERRALS BINARY UNSELECT SCAN SORT
THREAD=REFERENCES THREAD=ORDEREDSUBJECT MULTIAPPEND]
Pre-authenticated user ratan bitter.cup.hp.com IMAP4rev1
2004.352 at Thu, 20 Apr 2006 10:06:17 -0700 (PDT)
fetchmail: IMAP&gt; A0001 CAPABILITY
fetchmail: IMAP&lt; * CAPABILITY IMAP4REV1 LITERAL+ IDLE NAMESPACE
MAILBOX-REFERRALS BINARY UNSELECT SCAN SORT THREAD=REFERENCES
THREAD=ORDEREDSUBJECT MULTIAPPEND SASL-IR LOGIN-REFERRALS
STARTTLS LOGINDISABLED
fetchmail: IMAP&lt; A0001 OK CAPABILITY completed
fetchmail: Protocol identified as IMAP4 rev 1
fetchmail: selecting or re-polling default folder
fetchmail: IMAP&gt; A0002 SELECT &quot;INBOX&quot;
fetchmail: IMAP&lt; * 0 EXISTS
fetchmail: IMAP&lt; * 2 EXISTS
fetchmail: IMAP&lt; * NO Mailbox vulnerable - error creating
/var/mail/ratan.lock: No such file or directory
fetchmail: IMAP&lt; * 0 RECENT
fetchmail: IMAP&lt; * OK [UIDVALIDITY 1124412405] UID validity
status
fetchmail: IMAP&lt; * OK [UIDNEXT 25193] Predicted next UID
fetchmail: IMAP&lt; * FLAGS (\Answered \Flagged \Deleted \Draft
\Seen)
fetchmail: IMAP&lt; * OK [PERMANENTFLAGS (\* \Answered \Flagged
\Deleted \Draft \Seen)] Permanent flags
fetchmail: IMAP&lt; * OK [UNSEEN 2] first unseen message in
/home/ratan/mail/mbox
fetchmail: IMAP&lt; A0002 OK [READ-WRITE] SELECT completed
fetchmail: 2 messages waiting after first poll
fetchmail: IMAP&gt; A0003 EXPUNGE
fetchmail: IMAP&lt; A0003 OK No messages deleted, so no update
needed
fetchmail: 2 messages waiting after expunge
2 messages for ratan at bitter.
fetchmail: IMAP&gt; A0004 FETCH 1:2 RFC822.SIZE
fetchmail: IMAP&lt; * 1 FETCH (RFC822.SIZE 491)
fetchmail: IMAP&lt; * 2 FETCH (RFC822.SIZE 467)
fetchmail: IMAP&lt; A0004 OK FETCH completed
fetchmail: IMAP&gt; A0005 FETCH 1 RFC822.HEADER
fetchmail: IMAP&lt; * 1 FETCH (RFC822.HEADER {481}
reading message <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at bitter.cup.hp.com</A>:1 of 2 (481 header
octets)
About to rewrite Return-Path: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;
Rewritten version is Return-Path: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;

About to rewrite From: Ratan Nalumasu &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;
Rewritten version is From: Ratan Nalumasu &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;

About to rewrite To: <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at bitter.cup.hp.com</A>
Rewritten version is To: <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at bitter.cup.hp.com</A>

fetchmail: about to deliver with: cat &gt;&gt; /home/ratan/TEST
#
fetchmail: IMAP&lt; )
fetchmail: IMAP&lt; A0005 OK FETCH completed
fetchmail: IMAP&gt; A0006 FETCH 1 BODY.PEEK[TEXT]
fetchmail: IMAP&lt; * 1 FETCH (BODY[TEXT] {10}
 (10 body octets) *
fetchmail: IMAP&lt; )
fetchmail: IMAP&lt; A0006 OK FETCH completed
 flushed
fetchmail: IMAP&gt; A0007 STORE 1 +FLAGS (\Seen \Deleted)
fetchmail: IMAP&lt; * 1 FETCH (FLAGS (\Seen \Deleted))
fetchmail: IMAP&lt; A0007 OK STORE completed
fetchmail: IMAP&gt; A0008 FETCH 2 RFC822.HEADER
fetchmail: IMAP&lt; * 2 FETCH (RFC822.HEADER {467}
reading message <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at bitter.cup.hp.com</A>:2 of 2 (467 header
octets)
About to rewrite Return-Path: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;
Rewritten version is Return-Path: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;

About to rewrite From: Ratan Nalumasu &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;
Rewritten version is From: Ratan Nalumasu &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;

About to rewrite To: <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at bitter.cup.hp.com</A>
Rewritten version is To: <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at bitter.cup.hp.com</A>

fetchmail: about to deliver with: cat &gt;&gt; /home/ratan/TEST
#
fetchmail: IMAP&lt; )
fetchmail: IMAP&lt; A0008 OK FETCH completed
fetchmail: IMAP&gt; A0009 FETCH 2 BODY.PEEK[TEXT]
fetchmail: IMAP&lt; * 2 FETCH (BODY[TEXT] &quot;&quot;)
 (0 body octets)
fetchmail: IMAP&lt; A0009 OK FETCH completed
 flushed
fetchmail: IMAP&gt; A0010 STORE 2 +FLAGS (\Seen \Deleted)
fetchmail: IMAP&lt; * 2 FETCH (FLAGS (\Seen \Deleted))
fetchmail: IMAP&lt; A0010 OK STORE completed
fetchmail: selecting or re-polling default folder
fetchmail: IMAP&gt; A0011 EXPUNGE
fetchmail: IMAP&lt; * 1 EXPUNGE
fetchmail: IMAP&lt; * 1 EXPUNGE
fetchmail: IMAP&lt; * 0 EXISTS
fetchmail: IMAP&lt; * 0 RECENT
fetchmail: IMAP&lt; A0011 OK Expunged 2 messages
fetchmail: 0 messages waiting after re-poll
fetchmail: IMAP&gt; A0012 LOGOUT
fetchmail: IMAP&lt; * BYE bitter.cup.hp.com IMAP4rev1 server
terminating connection
fetchmail: IMAP&lt; A0012 OK LOGOUT completed
fetchmail: 6.2.5.2 querying bitter (protocol IMAP) at Thu 20 Apr
2006 10:06:15 AM PDT: poll completed
fetchmail: 6.2.5.2 querying bitter (protocol auto) at Thu 20 Apr
2006 10:06:15 AM PDT: poll completed
fetchmail: not swapping UID lists, no UIDs seen this query
fetchmail: Deleting fetchids file.
fetchmail: normal termination, status 0
fetchmail: Deleting fetchids file.

======= contents of /home/ratan/TEST file as a result of
fetchmail ========

$ cat TEST
Return-Path: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;
Received: from bitter.cup.hp.com [15.13.188.97]
        by localhost with IMAP (fetchmail-6.2.5.2)
        for <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at localhost</A> (single-drop); Thu, 20 Apr 2006
10:06:15 -0700 (PDT)
Received: (from <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at localhost</A>)
        by bitter.cup.hp.com (8.11.1/8.11.1) id k3KH3D606424
        for ratan; Thu, 20 Apr 2006 10:03:13 -0700 (PDT)
Date: Thu, 20 Apr 2006 10:03:13 -0700 (PDT)
From: Ratan Nalumasu &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;
Message-Id: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">200604201703.k3KH3D606424 at bitter.cup.hp.com</A>&gt;
To: <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at bitter.cup.hp.com</A>
Subject: mark this message as seen
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

asdfasdf
Return-Path: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;
Received: from bitter.cup.hp.com [15.13.188.97]
        by localhost with IMAP (fetchmail-6.2.5.2)
        for <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at localhost</A> (single-drop); Thu, 20 Apr 2006
10:06:15 -0700 (PDT)
Received: (from <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at localhost</A>)
        by bitter.cup.hp.com (8.11.1/8.11.1) id k3KH3Mm06429
        for ratan; Thu, 20 Apr 2006 10:03:22 -0700 (PDT)
Date: Thu, 20 Apr 2006 10:03:22 -0700 (PDT)
From: Ratan Nalumasu &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at cup.hp.com</A>&gt;
Message-Id: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">200604201703.k3KH3Mm06429 at bitter.cup.hp.com</A>&gt;
To: <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">ratan at bitter.cup.hp.com</A>
Subject: NEW message
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
<A HREF="http://mail.yahoo.com">http://mail.yahoo.com</A> 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000345.html">[fetchmail-users] Getting only messages older than X days
</A></li>
	<LI>Next message: <A HREF="000353.html">[fetchmail-users] &quot;Seen&quot; status disappears everytime [Resending]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#352">[ date ]</a>
              <a href="thread.html#352">[ thread ]</a>
              <a href="subject.html#352">[ subject ]</a>
              <a href="author.html#352">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-users">More information about the fetchmail-users
mailing list</a><br>
</body></html>
