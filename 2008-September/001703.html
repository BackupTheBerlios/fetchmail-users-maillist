<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-users] losing mails because of &quot;incorrect	header	line found&quot;
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-users/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20losing%20mails%20because%20of%20%22incorrect%0A%09header%09line%20found%22&In-Reply-To=%3C20080923091143.GH4668%40tamay-dogan.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001706.html">
   <LINK REL="Next"  HREF="001707.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-users] losing mails because of &quot;incorrect	header	line found&quot;</H1>
    <B>Michelle Konzack</B> 
    <A HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20losing%20mails%20because%20of%20%22incorrect%0A%09header%09line%20found%22&In-Reply-To=%3C20080923091143.GH4668%40tamay-dogan.net%3E"
       TITLE="[fetchmail-users] losing mails because of &quot;incorrect	header	line found&quot;">linux4michelle at tamay-dogan.net
       </A><BR>
    <I>Tue Sep 23 11:11:43 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001706.html">[fetchmail-users] losing mails because of &quot;incorrect	header	line found&quot;
</A></li>
        <LI>Next message: <A HREF="001707.html">[fetchmail-users] losing mails because of &quot;incorrect header	line found&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1703">[ date ]</a>
              <a href="thread.html#1703">[ thread ]</a>
              <a href="subject.html#1703">[ subject ]</a>
              <a href="author.html#1703">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Andy,

Am 2008-09-17 20:37:15, schrieb Andy Spiegl:
&gt;<i> No. I'd say the correct question would be: why not take a chance?
</I>&gt;<i> In case that the next hop really cannot cope with the broken mail
</I>&gt;<i> it will drop it itself or bounce it or something like that.
</I>&gt;<i> But in the other case the mail will reach its recipient.
</I>&gt;<i> I am sure you will agree that not 100% fall into the first category
</I>&gt;<i> and therefore fetchmail should TRY to deliver it to the next hop
</I>&gt;<i> instead of deliberately deleting it.
</I>
This does not work since I receive per  day  30-40  messages  with  such
broken headers.  All tried MTAs (courier, exim and postfix) REJECT  this
messages be default. So as the Matthias alredy mentioned, it is wast  of
time to fetch the message, waiting for the MTA and then do not know what
to do.

The ONLY hack I can imagine is, that fetchmail dump such  messages  into
a ~/.fetchmail_broken.mbox for further analysis...

Maybe Matthias and others can comment this.

&gt;<i> In my case the invalid header was this line:
</I>&gt;<i> &quot;This is a multi-part message in MIME format.&quot;
</I>&gt;<i> The mail program of the sender just forgot to put an empty line before
</I>&gt;<i> this line.  Really bad but NOT a reason to delete the otherwise
</I>&gt;<i> good mail.  If fetchmail deletes it because the RFCs say that such
</I>&gt;<i> a mail is invalid, fetchmail also has to comply with the part of the
</I>&gt;<i> RFCs that (I am pretty sure that) say that a mail should never be
</I>&gt;<i> dropped without at least notifying someone.
</I>
ONLY the receiving MTA has the right to &quot;notify&quot; (sending backscater  or
spam) to the sender.  If fetchmail is only fetching the  message  it  is
already to late...

&gt;<i> &gt; Leaving it on the server doesn't help either except for clogging up
</I>&gt;<i> &gt; the inbox with more and more unfetchable messages over time, the
</I>&gt;<i> &gt; invalid headers won't magically cure themselves.
</I>&gt;<i> Okay, I agree.  So the only solution is to try to pass it on to the
</I>&gt;<i> next hop.
</I>
And then it is REJECTed...  fetchmail get an error and now since  it  is
downloaded what to do with this crap?

Bounces or REJECTS has to be send immediatly while receiving the message
and NOT, when a $USER has time to fetch the messages on the ISPs host.

&gt;<i> &gt; I wonder how much of the dumped mail is actually legitimate and how
</I>&gt;<i> &gt; much stems from broken spam engines.
</I>&gt;<i> No spam, these mails are definitely HAMs (newsletter of the German
</I>&gt;<i> food chain Penny).  I already wrote them about their misconfiguration.
</I>
Here on  my  servers  those  messages  are  ALL  spam  and  definitively
generated by scripts and such things...

&gt;<i> Frederic Marchal wrote:
</I>&gt;<i> &gt; Passing the mail unmodified to Postfix never made any problem
</I>&gt;<i> &gt; here. It looks like it just ignores the invalid headers which, in my
</I>&gt;<i> &gt; case, never were necessary for the proper delivery of the mails.
</I>&gt;<i> Exactly my opinion :-)
</I>
Interesting since here (Debian GNU/Linux Etch) with postfix 

postfix:
  Installiert:2.3.8-2+b1
  M&#246;gliche Pakete:2.3.8-2+b1
  Versions-Tabelle:
 *** 2.3.8-2+b1 0
        500 file: etch/main Packages
        100 /var/lib/dpkg/status

it REJECT by default (I have installed  postfix  in  a  XEN  engine  for
migration issues since I use courier-mta on all of my machines).

The same things happen for exim4

Thanks, Greetings and nice Day/Evening
    Michelle Konzack
    Systemadministrator
    24V Electronic Engineer
    Tamay Dogan Network
    Debian GNU/Linux Consultant


-- 
Linux-User #280138 with the Linux Counter, <A HREF="http://counter.li.org/">http://counter.li.org/</A>
##################### Debian GNU/Linux Consultant #####################
Michelle Konzack   Apt. 917                  ICQ #328449886
+49/177/9351947    50, rue de Soultz         MSN LinuxMichi
+33/6/61925193     67100 Strasbourg/France   IRC #Debian (irc.icq.com)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.pgp
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/fetchmail-users/attachments/20080923/ecec18ed/attachment.pgp">https://lists.berlios.de/pipermail/fetchmail-users/attachments/20080923/ecec18ed/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001706.html">[fetchmail-users] losing mails because of &quot;incorrect	header	line found&quot;
</A></li>
	<LI>Next message: <A HREF="001707.html">[fetchmail-users] losing mails because of &quot;incorrect header	line found&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1703">[ date ]</a>
              <a href="thread.html#1703">[ thread ]</a>
              <a href="subject.html#1703">[ subject ]</a>
              <a href="author.html#1703">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-users">More information about the fetchmail-users
mailing list</a><br>
</body></html>
