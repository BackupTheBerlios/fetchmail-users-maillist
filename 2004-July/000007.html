<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-users] Help with warning: Illegal address syntax (berlios)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-users/2004-July/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20Help%20with%20warning%3A%20Illegal%20address%20syntax%20%28berlios%29&In-Reply-To=%3C200407231313.24870.gary%40garysims.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000012.html">
   <LINK REL="Next"  HREF="000011.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-users] Help with warning: Illegal address syntax (berlios)</H1>
    <B>Gary Sims</B> 
    <A HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20Help%20with%20warning%3A%20Illegal%20address%20syntax%20%28berlios%29&In-Reply-To=%3C200407231313.24870.gary%40garysims.co.uk%3E"
       TITLE="[fetchmail-users] Help with warning: Illegal address syntax (berlios)">gary at garysims.co.uk
       </A><BR>
    <I>Fri Jul 23 12:13:24 CEST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000012.html">[fetchmail-users] IDLE support broken?
</A></li>
        <LI>Next message: <A HREF="000011.html">[fetchmail-users] Re: Help with warning: Illegal address syntax (berlios)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7">[ date ]</a>
              <a href="thread.html#7">[ thread ]</a>
              <a href="subject.html#7">[ subject ]</a>
              <a href="author.html#7">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

This is a problem which is on going on the fetchmail-friends list at ccil.org. 
I thought I would post it here as well in case people have migrated. Any help 
will would mich appreciated.

+++++++++++++

I have a dial up connection and I am using latest fetchmail (6.2.5) to get the 
mail from a POP3 mailbox and I am using postfix (V1.1.11) as the local SMTP 
server and all this is running on RedHat 9.0.

In general my email is getting through but I do get the following errors in my 
mail logs.

Jul 18 13:25:51 exodus postfix/smtpd[25020]: warning: Illegal address syntax 
from unknown[127.0.0.1] in MAIL command: 
&lt;column-greekthoughts-return-23-gary=<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">garysims.co.uk at lists.Received</A>: (qmail 
21055 invoked from network); 18 Jul 2004 07:09:56 -0000&gt;

It is about a message which I am expecting... I am guessing the error is 
occuring when fetchmail talks to postfix to submit the message for local 
delivery.

Looking at the &quot;illegal address&quot; it is clear that the Received line is mixed 
in with the address.

I have now traced one of my problem messages with fetchmail -v -v and this is 
what I get


fetchmail: POP3&gt; LIST 7
fetchmail: POP3&lt; +OK 7 8568
fetchmail: POP3&gt; TOP 7 99999999
fetchmail: POP3&lt; +OK headers follow.
reading message <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">gary.sims at mail.rdslink.ro</A>:7 of 8 (8568 octets)
About to rewrite Return-Path: 
&lt;c615952fff0eb8febd27fbc7b1dd4792bdeb77a3023419e0f4063f69cReceived: (qmail 
22262 invoked from network); 23 Jul 2004 04:01:03 -0000
Rewritten version is Return-Path: 
&lt;c615952fff0eb8febd27fbc7b1dd4792bdeb77a3023419e0f4063f69cReceived: (qmail 
22262 invoked from network); 23 Jul 2004 04:01:03 -0000

About to rewrite Reply-To: 
<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">c615952fff0eb8febd27fbc7b1dd4792bdeb77a3023419e0f4063f69c428b995.user at ebs.bbc.co.uk</A>
Rewritten version is Reply-To: 
<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">c615952fff0eb8febd27fbc7b1dd4792bdeb77a3023419e0f4063f69c428b995.user at ebs.bbc.co.uk</A>

About to rewrite From: &quot;BBC daily email&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">dailyemail at bbc.co.uk</A>&gt;
Rewritten version is From: &quot;BBC daily email&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">dailyemail at bbc.co.uk</A>&gt;

About to rewrite To: <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">gary at garysims.co.uk</A>
Rewritten version is To: <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">gary at garysims.co.uk</A>

fetchmail: forwarding to localhost
fetchmail: SMTP&gt; MAIL 
FROM:&lt;c615952fff0eb8febd27fbc7b1dd4792bdeb77a3023419e0f4063f69cReceived: 
(qmail 22262 invoked from network); 23 Jul 2004 04:01:03 
<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">-0000 at mail.rdslink.ro</A>&gt; BODY=8BITMIME SIZE=8568
fetchmail: SMTP&lt; 501 Bad address syntax
fetchmail: SMTP error: 501 Bad address syntax
fetchmail: SMTP&lt; 220 exodus.aca-vulcan.ro ESMTP Postfix
fetchmail: SMTP&gt; HELO localhost
fetchmail: SMTP&lt; 250 exodus.aca-vulcan.ro
fetchmail: SMTP&gt; MAIL FROM:&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">FETCHMAIL-DAEMON at exodus</A>&gt;
fetchmail: SMTP&lt; 250 Ok
fetchmail: SMTP&gt; RCPT 
TO:&lt;c615952fff0eb8febd27fbc7b1dd4792bdeb77a3023419e0f4063f69cReceived: (qmail 
22262 invoked from network); 23 Jul 2004 04:01:03 -0000&gt;
fetchmail: SMTP&lt; 501 Bad address syntax
fetchmail: SMTP&gt; QUIT
fetchmail: SMTP&lt; 221 Bye
fetchmail: SMTP&gt; RSET
fetchmail: SMTP&lt; 250 Ok
...... flushed
fetchmail: POP3&gt; DELE 7
fetchmail: POP3&lt; +OK Deleted.


Clearly the address which fetchmail is submitting to the SMTP server in the 
MAIL FROM command is broken. Of course the question is what was the origial 
like. The problem is that I don't know as the message has now been deleted. 

Before this I removed the antispam option from my fetchmailrc file. However 
the email is still being deleted even though it was not delivered or 
non-delivered. Is that behaviour correct?

Any more clues?

Thanks,

Gary
-- 
Gary Sims (<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">gary at garysims.co.uk</A>)
Vulcan, Brasov, Romania

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000012.html">[fetchmail-users] IDLE support broken?
</A></li>
	<LI>Next message: <A HREF="000011.html">[fetchmail-users] Re: Help with warning: Illegal address syntax (berlios)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7">[ date ]</a>
              <a href="thread.html#7">[ thread ]</a>
              <a href="subject.html#7">[ subject ]</a>
              <a href="author.html#7">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-users">More information about the fetchmail-users
mailing list</a><br>
</body></html>
