<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-users] Fetchmail fails with BAD Command received in invalid state after upgrade to 6.3.24
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-users/2013-January/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20Fetchmail%20fails%20with%20BAD%20Command%20received%20in%0A%20invalid%20state%20after%20upgrade%20to%206.3.24&In-Reply-To=%3C50EB1264.8050008%40gmx.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003299.html">
   <LINK REL="Next"  HREF="003304.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-users] Fetchmail fails with BAD Command received in invalid state after upgrade to 6.3.24</H1>
    <B>Matthias Andree</B> 
    <A HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20Fetchmail%20fails%20with%20BAD%20Command%20received%20in%0A%20invalid%20state%20after%20upgrade%20to%206.3.24&In-Reply-To=%3C50EB1264.8050008%40gmx.de%3E"
       TITLE="[fetchmail-users] Fetchmail fails with BAD Command received in invalid state after upgrade to 6.3.24">matthias.andree at gmx.de
       </A><BR>
    <I>Mon Jan  7 19:22:28 CET 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="003299.html">[fetchmail-users] Fetchmail fails with BAD Command received in invalid state after upgrade to 6.3.24
</A></li>
        <LI>Next message: <A HREF="003304.html">[fetchmail-users] Fetchmail fails with BAD Command received in	invalid state after upgrade to 6.3.24
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3303">[ date ]</a>
              <a href="thread.html#3303">[ thread ]</a>
              <a href="subject.html#3303">[ subject ]</a>
              <a href="author.html#3303">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am 06.01.2013 22:39, schrieb Peter van Nes:

&gt;<i> poll mail.the-future-group.com proto imap port 143:
</I>&gt;<i>         auth password user 'username' with password 'password' sslproto TLS1 smtpname <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">my at personaldomain.com</A>
</I>&gt;<i> 
</I>&gt;<i> When running fetchmail in debug ;
</I>&gt;<i> fetchmail superuser$ /usr/local/bin/fetchmail -vvvv --nodetach -f /private/var/fetchmail/.fetchmailrc --nosyslog
</I>&gt;<i> 
</I>&gt;<i> i get the following output ;
</I>&gt;<i> 
</I>&gt;<i> Old UID list from mail.the-future-group.com: &lt;empty&gt;
</I>&gt;<i> Scratch list of UIDs: &lt;empty&gt;
</I>&gt;<i> fetchmail: starting fetchmail 6.3.24 daemon
</I>&gt;<i> fetchmail: 6.3.24 querying mail.the-future-group.com (protocol IMAP) at Sun, 06 Jan 2013 22:14:55 +0100 (CET): poll started
</I>&gt;<i> Trying to connect to 46.244.15.13/143...connected.
</I>&gt;<i> fetchmail: IMAP&lt; * OK The Microsoft Exchange IMAP4 service is ready.
</I>&gt;<i> fetchmail: IMAP&gt; A0001 CAPABILITY
</I>&gt;<i> fetchmail: IMAP&lt; * CAPABILITY IMAP4 IMAP4rev1 LOGINDISABLED STARTTLS UIDPLUS CHILDREN IDLE NAMESPACE LITERAL+
</I>&gt;<i> fetchmail: IMAP&lt; A0001 OK CAPABILITY completed.
</I>&gt;<i> fetchmail: Protocol identified as IMAP4 rev 1
</I>&gt;<i> fetchmail: IMAP&gt; A0002 LOGIN &quot;p.vannes&quot; *
</I>
Peter,

it seems you have found a bug, and also may have misconfigured fetchmail
when compiling it.

Exchange has advertised LOGINDISABLED, so fetchmail must not be trying
LOGIN.

Exchange has also advertised STARTTLS, but fetchmail is not using it -
have you run ./configure with the --with-ssl option? I suppose not;
fetchmail -V|head -n1 will show it, there should be +SSL somewhere.

If fetchmail were to use and succeed with STARTTLS, Exchange would
likely offer LOGIN through the secure channel so you would no longer get
BAD.

Hope that helps.

Best regards,
Matthias

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003299.html">[fetchmail-users] Fetchmail fails with BAD Command received in invalid state after upgrade to 6.3.24
</A></li>
	<LI>Next message: <A HREF="003304.html">[fetchmail-users] Fetchmail fails with BAD Command received in	invalid state after upgrade to 6.3.24
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3303">[ date ]</a>
              <a href="thread.html#3303">[ thread ]</a>
              <a href="subject.html#3303">[ subject ]</a>
              <a href="author.html#3303">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-users">More information about the fetchmail-users
mailing list</a><br>
</body></html>
