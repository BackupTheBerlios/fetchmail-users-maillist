<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [fetchmail-users] Fetchmail socket error.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fetchmail-users/2006-March/index.html" >
   <LINK REL="made" HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20Fetchmail%20socket%20error.&In-Reply-To=%3C442AB92B.7080000%40viddel.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000330.html">
   <LINK REL="Next"  HREF="000332.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[fetchmail-users] Fetchmail socket error.</H1>
    <B>Ernst Verhaar</B> 
    <A HREF="mailto:fetchmail-users%40lists.berlios.de?Subject=Re%3A%20%5Bfetchmail-users%5D%20Fetchmail%20socket%20error.&In-Reply-To=%3C442AB92B.7080000%40viddel.nl%3E"
       TITLE="[fetchmail-users] Fetchmail socket error.">e.verhaar at viddel.nl
       </A><BR>
    <I>Wed Mar 29 18:43:23 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000330.html">[fetchmail-users] Fetchmail socket error.
</A></li>
        <LI>Next message: <A HREF="000332.html">[fetchmail-users] Fetchmail socket error.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#331">[ date ]</a>
              <a href="thread.html#331">[ thread ]</a>
              <a href="subject.html#331">[ subject ]</a>
              <a href="author.html#331">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

Tnx for the quick repsonse,
Unfortunatly the suggestions did not work.

The Host Machine is running FreeBSD 5.4 with Packet filter. The client's 
ip is configured as trusted. ICMP traffic is possible.
There is only one xl0 device ip address 212.204.236.251

The Client Machine is running SuSe 10 OSS with SuseFirewall. The host's 
ip is considered trusted.
The NIC configuration is exotic but not difficult.
eth0 = local LAN 192.xx.xx.xx address
eth1 = building LAN 172.xx.xx.xx address
dsl0 = pppoe on top of eth1.  145.xx.xx.xx address

Default gateway for all traffic is dsl0.

I attached an strace log of an unsuccesfull fetchmail attempt. 
Unfortunatly this log is like the chinese language to me. :-(
fetchmail -vvv does not provides more information except socket error.

Thanks again for all the suggestions, if you have any more I welcome them!

Kind regards,

Ernst Verhaar





Matthias Andree wrote:

&gt;<i>Ernst Verhaar &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">e.verhaar at viddel.nl</A>&gt; writes:
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>fetchmail: IMAP&lt; * 1 FETCH (BODY[TEXT] {375012}
</I>&gt;&gt;<i>(375012 body octets)
</I>&gt;&gt;<i>******************.***************.*********************.**********
</I>&gt;&gt;<i>**********.***************.***************fetchmail: socket error while
</I>&gt;&gt;<i>fetching from <A HREF="https://lists.berlios.de/mailman/listinfo/fetchmail-users">vid_dbmanta at 212.204.236.251</A>
</I>&gt;&gt;<i>fetchmail: 6.3.2 querying 212.204.236.251 (protocol IMAP) at Fri Mar 24
</I>&gt;&gt;<i>16:30:12 2006: poll completed
</I>&gt;&gt;<i>fetchmail: Query status=2 (SOCKET)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>According to the FAQ, I should set the MTU to 552. This doesn't help.
</I>&gt;&gt;<i>I tried fetchmail versions 6.2.5.2 (included in Suse 10) and fetchmail
</I>&gt;&gt;<i>6.3.2 (builded on Suse 10) On the same machine. I also tried fetching
</I>&gt;&gt;<i>the same emailbox on a different machine Fedora Core 4 (fetchmail
</I>&gt;&gt;<i>6.2.5.5). And on a Fedora Core 4 machine at a different
</I>&gt;&gt;<i>Internetprovider. I get the same error everytime...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Fetchmail 6.2.5 on an very old Slackware distro runs
</I>&gt;&gt;<i>perfectly. (different machine, same and different internet provider).
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>This appears to happen a few kBytes into a larger transfer.
</I>&gt;<i>
</I>&gt;<i>Are you (on the client end) using routers, Linux-based firewalls, other
</I>&gt;<i>firewalls along the way? Does the server use such? Or FreeBSD ipfw,
</I>&gt;<i>ipfw2, ipfilter?  
</I>&gt;<i>
</I>&gt;<i>Are those devices or filters letting ICMP traffic through between server
</I>&gt;<i>and client? What physical network is between server and client?
</I>&gt;<i>Modem/PPP, DSL, ...?
</I>&gt;<i>
</I>&gt;<i>Is fetchmail -vvv any more helpful? Perhaps attaching strace?
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>The host with is being contacted is a FreeBSD running both dovecot and
</I>&gt;&gt;<i>imap-uv (different port).
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Which FreeBSD version is the server running?
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>Could this be a fetchmail error? Or is it a combination between a
</I>&gt;&gt;<i>specific Distribution and a specific fetchmail version?
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Theoretically possible, but both unlikely. Socket errors are reported to
</I>&gt;<i>fetchmail by the network stack built into your kernel (or kernel
</I>&gt;<i>module), and 6.3.2 has been around for a while, if there'd been
</I>&gt;<i>systematic incompatibilites, we'd pretty surely see more reports.
</I>&gt;<i>
</I>&gt;<i>Are wireless networks (WLAN, IEEE 802.11*) involved?
</I>&gt;<i>
</I>&gt;<i>On any Linux machine that has troubles, if it runs netfilter (firewalls,
</I>&gt;<i>SUSEfirewall for instance), run:
</I>&gt;<i>/sbin/sysctl net.ipv4.netfilter.ip_conntrack_tcp_be_liberal=1
</I>&gt;<i>to work around Linux kernel bugs.
</I>&gt;<i>
</I>&gt;<i>Perhaps running [t]ethereal or tcpdump on either side sheds some light
</I>&gt;<i>about the nature of the socket error, if it starves, if it's reset (TCP
</I>&gt;<i>RST), shut down (FIN), if it's killed (some ICMP) or what else.
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/fetchmail-users/attachments/20060329/e1e2aa03/attachment.html">https://lists.berlios.de/pipermail/fetchmail-users/attachments/20060329/e1e2aa03/attachment.html</A>&gt;
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: stracelog.txt
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/fetchmail-users/attachments/20060329/e1e2aa03/attachment.txt">https://lists.berlios.de/pipermail/fetchmail-users/attachments/20060329/e1e2aa03/attachment.txt</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000330.html">[fetchmail-users] Fetchmail socket error.
</A></li>
	<LI>Next message: <A HREF="000332.html">[fetchmail-users] Fetchmail socket error.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#331">[ date ]</a>
              <a href="thread.html#331">[ thread ]</a>
              <a href="subject.html#331">[ subject ]</a>
              <a href="author.html#331">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fetchmail-users">More information about the fetchmail-users
mailing list</a><br>
</body></html>
